import{c as ws,d as _s,e as Dt,f as qt,g as Ut,h as Wt,i as vs,j as Es}from"./chunk-5ZR5N24F.js";import"./chunk-4F6IZRL6.js";import{a as ys}from"./chunk-SOBX5UMN.js";import{f as h,j as se,l as d}from"./chunk-UUTKIRVD.js";var Bt=h(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.walletLogo=void 0;var Ss=(r,e)=>{let t;switch(r){case"standard":return t=e,`data:image/svg+xml,%3Csvg width='${e}' height='${t}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return t=e,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${t}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return t=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return t=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return t=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return t=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return t=e,`data:image/svg+xml,%3Csvg width='${e}' height='${t}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};ge.walletLogo=Ss});var ne=h(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.errorValues=F.standardErrorCodes=void 0;F.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};F.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}}});var et=h(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.serialize=C.getErrorCode=C.isValidCode=C.getMessageFromCode=C.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var pe=ne(),Ft="Unspecified error message.";C.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function Vt(r,e=Ft){if(r&&Number.isInteger(r)){let t=r.toString();if(Xe(pe.errorValues,t))return pe.errorValues[t].message;if(Zt(r))return C.JSON_RPC_SERVER_ERROR_MESSAGE}return e}C.getMessageFromCode=Vt;function zt(r){if(!Number.isInteger(r))return!1;let e=r.toString();return!!(pe.errorValues[e]||Zt(r))}C.isValidCode=zt;function Cs(r){var e;if(typeof r=="number")return r;if(Is(r))return(e=r.code)!==null&&e!==void 0?e:r.errorCode}C.getErrorCode=Cs;function Is(r){return typeof r=="object"&&r!==null&&(typeof r.code=="number"||typeof r.errorCode=="number")}function ks(r,{shouldIncludeStack:e=!1}={}){let t={};if(r&&typeof r=="object"&&!Array.isArray(r)&&Xe(r,"code")&&zt(r.code)){let s=r;t.code=s.code,s.message&&typeof s.message=="string"?(t.message=s.message,Xe(s,"data")&&(t.data=s.data)):(t.message=Vt(t.code),t.data={originalError:Ht(r)})}else t.code=pe.standardErrorCodes.rpc.internal,t.message=Kt(r,"message")?r.message:Ft,t.data={originalError:Ht(r)};return e&&(t.stack=Kt(r,"stack")?r.stack:void 0),t}C.serialize=ks;function Zt(r){return r>=-32099&&r<=-32e3}function Ht(r){return r&&typeof r=="object"&&!Array.isArray(r)?Object.assign({},r):r}function Xe(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Kt(r,e){return typeof r=="object"&&r!==null&&e in r&&typeof r[e]=="string"}});var $t=h(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.standardErrors=void 0;var v=ne(),Gt=et();be.standardErrors={rpc:{parse:r=>I(v.standardErrorCodes.rpc.parse,r),invalidRequest:r=>I(v.standardErrorCodes.rpc.invalidRequest,r),invalidParams:r=>I(v.standardErrorCodes.rpc.invalidParams,r),methodNotFound:r=>I(v.standardErrorCodes.rpc.methodNotFound,r),internal:r=>I(v.standardErrorCodes.rpc.internal,r),server:r=>{if(!r||typeof r!="object"||Array.isArray(r))throw new Error("Ethereum RPC Server errors must provide single object argument.");let{code:e}=r;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return I(e,r)},invalidInput:r=>I(v.standardErrorCodes.rpc.invalidInput,r),resourceNotFound:r=>I(v.standardErrorCodes.rpc.resourceNotFound,r),resourceUnavailable:r=>I(v.standardErrorCodes.rpc.resourceUnavailable,r),transactionRejected:r=>I(v.standardErrorCodes.rpc.transactionRejected,r),methodNotSupported:r=>I(v.standardErrorCodes.rpc.methodNotSupported,r),limitExceeded:r=>I(v.standardErrorCodes.rpc.limitExceeded,r)},provider:{userRejectedRequest:r=>V(v.standardErrorCodes.provider.userRejectedRequest,r),unauthorized:r=>V(v.standardErrorCodes.provider.unauthorized,r),unsupportedMethod:r=>V(v.standardErrorCodes.provider.unsupportedMethod,r),disconnected:r=>V(v.standardErrorCodes.provider.disconnected,r),chainDisconnected:r=>V(v.standardErrorCodes.provider.chainDisconnected,r),unsupportedChain:r=>V(v.standardErrorCodes.provider.unsupportedChain,r),custom:r=>{if(!r||typeof r!="object"||Array.isArray(r))throw new Error("Ethereum Provider custom errors must provide single object argument.");let{code:e,message:t,data:s}=r;if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string');return new me(e,t,s)}}};function I(r,e){let[t,s]=Yt(e);return new fe(r,t||(0,Gt.getMessageFromCode)(r),s)}function V(r,e){let[t,s]=Yt(e);return new me(r,t||(0,Gt.getMessageFromCode)(r),s)}function Yt(r){if(r){if(typeof r=="string")return[r];if(typeof r=="object"&&!Array.isArray(r)){let{message:e,data:t}=r;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,t]}}return[]}var fe=class extends Error{constructor(e,t,s){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string.');super(t),this.code=e,s!==void 0&&(this.data=s)}},me=class extends fe{constructor(e,t,s){if(!Ms(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,s)}};function Ms(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}});var L=h(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.standardErrors=z.standardErrorCodes=void 0;var As=ne();Object.defineProperty(z,"standardErrorCodes",{enumerable:!0,get:function(){return As.standardErrorCodes}});var Ls=$t();Object.defineProperty(z,"standardErrors",{enumerable:!0,get:function(){return Ls.standardErrors}})});var we=h(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.isErrorResponse=void 0;function Rs(r){return r.errorMessage!==void 0}ye.isErrorResponse=Rs});var ie=h(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.LIB_VERSION=void 0;_e.LIB_VERSION="4.0.3"});var Jt=h(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.serializeError=void 0;var xs=we(),Ps=ie(),Ns=ne(),Os=et();function Ts(r,e){let t=(0,Os.serialize)(js(r),{shouldIncludeStack:!0}),s=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");s.searchParams.set("version",Ps.LIB_VERSION),s.searchParams.set("code",t.code.toString());let n=Ds(t.data,e);return n&&s.searchParams.set("method",n),s.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:s.href})}ve.serializeError=Ts;function js(r){return typeof r=="string"?{message:r,code:Ns.standardErrorCodes.rpc.internal}:(0,xs.isErrorResponse)(r)?Object.assign(Object.assign({},r),{message:r.errorMessage,code:r.errorCode,data:{method:r.method}}):r}function Ds(r,e){let t=r?.method;if(t)return t;if(e!==void 0){if(typeof e=="string")return e;if(Array.isArray(e)){if(e.length>0)return e[0].method}else return e.method}}});var Ee=h(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.RegExpString=S.IntNumber=S.BigIntString=S.AddressString=S.HexString=S.OpaqueType=void 0;function ae(){return r=>r}S.OpaqueType=ae;S.HexString=ae();S.AddressString=ae();S.BigIntString=ae();function qs(r){return Math.floor(r)}S.IntNumber=qs;S.RegExpString=ae()});var R=h(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.areAddressArraysEqual=l.getFavicon=l.range=l.isBigNumber=l.ensureParsedJSONObject=l.ensureBigInt=l.ensureRegExpString=l.ensureIntNumber=l.ensureBuffer=l.ensureAddressString=l.ensureEvenLengthHexString=l.ensureHexString=l.isHexString=l.prepend0x=l.strip0x=l.has0xPrefix=l.hexStringFromIntNumber=l.intNumberFromHexString=l.bigIntStringFromBigInt=l.hexStringFromBuffer=l.hexStringToUint8Array=l.uint8ArrayToHex=l.randomBytesHex=void 0;var H=L(),k=Ee(),Qt=/^[0-9]*$/,Xt=/^[a-f0-9]*$/;function Us(r){return er(crypto.getRandomValues(new Uint8Array(r)))}l.randomBytesHex=Us;function er(r){return[...r].map(e=>e.toString(16).padStart(2,"0")).join("")}l.uint8ArrayToHex=er;function Ws(r){return new Uint8Array(r.match(/.{1,2}/g).map(e=>parseInt(e,16)))}l.hexStringToUint8Array=Ws;function Bs(r,e=!1){let t=r.toString("hex");return(0,k.HexString)(e?`0x${t}`:t)}l.hexStringFromBuffer=Bs;function Hs(r){return(0,k.BigIntString)(r.toString(10))}l.bigIntStringFromBigInt=Hs;function Ks(r){return(0,k.IntNumber)(Number(BigInt(ce(r,!0))))}l.intNumberFromHexString=Ks;function Fs(r){return(0,k.HexString)(`0x${BigInt(r).toString(16)}`)}l.hexStringFromIntNumber=Fs;function tt(r){return r.startsWith("0x")||r.startsWith("0X")}l.has0xPrefix=tt;function Se(r){return tt(r)?r.slice(2):r}l.strip0x=Se;function tr(r){return tt(r)?`0x${r.slice(2)}`:`0x${r}`}l.prepend0x=tr;function oe(r){if(typeof r!="string")return!1;let e=Se(r).toLowerCase();return Xt.test(e)}l.isHexString=oe;function rr(r,e=!1){if(typeof r=="string"){let t=Se(r).toLowerCase();if(Xt.test(t))return(0,k.HexString)(e?`0x${t}`:t)}throw H.standardErrors.rpc.invalidParams(`"${String(r)}" is not a hexadecimal string`)}l.ensureHexString=rr;function ce(r,e=!1){let t=rr(r,!1);return t.length%2===1&&(t=(0,k.HexString)(`0${t}`)),e?(0,k.HexString)(`0x${t}`):t}l.ensureEvenLengthHexString=ce;function Vs(r){if(typeof r=="string"){let e=Se(r).toLowerCase();if(oe(e)&&e.length===40)return(0,k.AddressString)(tr(e))}throw H.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(r)}`)}l.ensureAddressString=Vs;function zs(r){if(Buffer.isBuffer(r))return r;if(typeof r=="string"){if(oe(r)){let e=ce(r,!1);return Buffer.from(e,"hex")}return Buffer.from(r,"utf8")}throw H.standardErrors.rpc.invalidParams(`Not binary data: ${String(r)}`)}l.ensureBuffer=zs;function sr(r){if(typeof r=="number"&&Number.isInteger(r))return(0,k.IntNumber)(r);if(typeof r=="string"){if(Qt.test(r))return(0,k.IntNumber)(Number(r));if(oe(r))return(0,k.IntNumber)(Number(BigInt(ce(r,!0))))}throw H.standardErrors.rpc.invalidParams(`Not an integer: ${String(r)}`)}l.ensureIntNumber=sr;function Zs(r){if(r instanceof RegExp)return(0,k.RegExpString)(r.toString());throw H.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(r)}`)}l.ensureRegExpString=Zs;function Gs(r){if(r!==null&&(typeof r=="bigint"||nr(r)))return BigInt(r.toString(10));if(typeof r=="number")return BigInt(sr(r));if(typeof r=="string"){if(Qt.test(r))return BigInt(r);if(oe(r))return BigInt(ce(r,!0))}throw H.standardErrors.rpc.invalidParams(`Not an integer: ${String(r)}`)}l.ensureBigInt=Gs;function Ys(r){if(typeof r=="string")return JSON.parse(r);if(typeof r=="object")return r;throw H.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(r)}`)}l.ensureParsedJSONObject=Ys;function nr(r){if(r==null||typeof r.constructor!="function")return!1;let{constructor:e}=r;return typeof e.config=="function"&&typeof e.EUCLID=="number"}l.isBigNumber=nr;function $s(r,e){return Array.from({length:e-r},(t,s)=>r+s)}l.range=$s;function Js(){let r=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:e,host:t}=document.location,s=r?r.getAttribute("href"):null;return!s||s.startsWith("javascript:")||s.startsWith("vbscript:")?null:s.startsWith("http://")||s.startsWith("https://")||s.startsWith("data:")?s:s.startsWith("//")?e+s:`${e}//${t}${s}`}l.getFavicon=Js;function Qs(r,e){return r.length===e.length&&r.every((t,s)=>t===e[s])}l.areAddressArraysEqual=Qs});var rt=h(y=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});y.decryptContent=y.encryptContent=y.importKeyFromHexString=y.exportKeyToHexString=y.decrypt=y.encrypt=y.deriveSharedSecret=y.generateKeyPair=void 0;var ir=R();function Xs(){return d(this,null,function*(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])})}y.generateKeyPair=Xs;function en(r,e){return d(this,null,function*(){return crypto.subtle.deriveKey({name:"ECDH",public:e},r,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])})}y.deriveSharedSecret=en;function ar(r,e){return d(this,null,function*(){let t=crypto.getRandomValues(new Uint8Array(12)),s=yield crypto.subtle.encrypt({name:"AES-GCM",iv:t},r,new TextEncoder().encode(e));return{iv:t,cipherText:s}})}y.encrypt=ar;function or(s,n){return d(this,arguments,function*(r,{iv:e,cipherText:t}){let a=yield crypto.subtle.decrypt({name:"AES-GCM",iv:e},r,t);return new TextDecoder().decode(a)})}y.decrypt=or;function cr(r){switch(r){case"public":return"spki";case"private":return"pkcs8"}}function tn(r,e){return d(this,null,function*(){let t=cr(r),s=yield crypto.subtle.exportKey(t,e);return(0,ir.uint8ArrayToHex)(new Uint8Array(s))})}y.exportKeyToHexString=tn;function rn(r,e){return d(this,null,function*(){let t=cr(r),s=(0,ir.hexStringToUint8Array)(e).buffer;return yield crypto.subtle.importKey(t,s,{name:"ECDH",namedCurve:"P-256"},!0,r==="private"?["deriveKey"]:[])})}y.importKeyFromHexString=rn;function sn(r,e){return d(this,null,function*(){let t=JSON.stringify(r,(s,n)=>{if(!(n instanceof Error))return n;let a=n;return Object.assign(Object.assign({},a.code?{code:a.code}:{}),{message:a.message})});return ar(e,t)})}y.encryptContent=sn;function nn(r,e){return d(this,null,function*(){return JSON.parse(yield or(e,r))})}y.decryptContent=nn});var q=h(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.ScopedLocalStorage=void 0;var st=class r{constructor(e,t){this.scope=e,this.module=t}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){let e=this.scopedKey(""),t=[];for(let s=0;s<localStorage.length;s++){let n=localStorage.key(s);typeof n=="string"&&n.startsWith(e)&&t.push(n)}t.forEach(s=>localStorage.removeItem(s))}scopedKey(e){return`-${this.scope}${this.module?`:${this.module}`:""}:${e}`}static clearAll(){new r("CBWSDK").clear(),new r("walletlink").clear()}};Ce.ScopedLocalStorage=st});var dr=h(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.SCWKeyManager=void 0;var Ie=rt(),an=q(),nt={storageKey:"ownPrivateKey",keyType:"private"},it={storageKey:"ownPublicKey",keyType:"public"},at={storageKey:"peerPublicKey",keyType:"public"},ot=class{constructor(){this.storage=new an.ScopedLocalStorage("CBWSDK","SCWKeyManager"),this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}getOwnPublicKey(){return d(this,null,function*(){return yield this.loadKeysIfNeeded(),this.ownPublicKey})}getSharedSecret(){return d(this,null,function*(){return yield this.loadKeysIfNeeded(),this.sharedSecret})}setPeerPublicKey(e){return d(this,null,function*(){this.sharedSecret=null,this.peerPublicKey=e,yield this.storeKey(at,e),yield this.loadKeysIfNeeded()})}clear(){return d(this,null,function*(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,this.storage.removeItem(it.storageKey),this.storage.removeItem(nt.storageKey),this.storage.removeItem(at.storageKey)})}generateKeyPair(){return d(this,null,function*(){let e=yield(0,Ie.generateKeyPair)();this.ownPrivateKey=e.privateKey,this.ownPublicKey=e.publicKey,yield this.storeKey(nt,e.privateKey),yield this.storeKey(it,e.publicKey)})}loadKeysIfNeeded(){return d(this,null,function*(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=yield this.loadKey(nt)),this.ownPublicKey===null&&(this.ownPublicKey=yield this.loadKey(it)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&(yield this.generateKeyPair()),this.peerPublicKey===null&&(this.peerPublicKey=yield this.loadKey(at)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=yield(0,Ie.deriveSharedSecret)(this.ownPrivateKey,this.peerPublicKey)}})}loadKey(e){return d(this,null,function*(){let t=this.storage.getItem(e.storageKey);return t?(0,Ie.importKeyFromHexString)(e.keyType,t):null})}storeKey(e,t){return d(this,null,function*(){let s=yield(0,Ie.exportKeyToHexString)(e.keyType,t);this.storage.setItem(e.storageKey,s)})}};ke.SCWKeyManager=ot});var pr=h(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.SCWStateManager=void 0;var on=q(),ur="accounts",lr="activeChain",hr="availableChains",gr="walletCapabilities",ct=class{get accounts(){return this._accounts}get activeChain(){return this._activeChain}get walletCapabilities(){return this._walletCapabilities}constructor(e){var t,s;this.storage=new on.ScopedLocalStorage("CBWSDK","SCWStateManager"),this.updateListener=e.updateListener,this.availableChains=this.loadItemFromStorage(hr),this._walletCapabilities=this.loadItemFromStorage(gr);let n=this.loadItemFromStorage(ur),a=this.loadItemFromStorage(lr);n&&this.updateListener.onAccountsUpdate({accounts:n,source:"storage"}),a&&this.updateListener.onChainUpdate({chain:a,source:"storage"}),this._accounts=n||[],this._activeChain=a||{id:(s=(t=e.appChainIds)===null||t===void 0?void 0:t[0])!==null&&s!==void 0?s:1}}updateAccounts(e){this._accounts=e,this.storeItemToStorage(ur,e),this.updateListener.onAccountsUpdate({accounts:e,source:"wallet"})}switchChain(e){var t;let s=(t=this.availableChains)===null||t===void 0?void 0:t.find(n=>n.id===e);return s?(s===this._activeChain||(this._activeChain=s,this.storeItemToStorage(lr,s),this.updateListener.onChainUpdate({chain:s,source:"wallet"})),!0):!1}updateAvailableChains(e){if(!e||Object.keys(e).length===0)return;let t=Object.entries(e).map(([s,n])=>({id:Number(s),rpcUrl:n}));this.availableChains=t,this.storeItemToStorage(hr,t),this.switchChain(this._activeChain.id)}updateWalletCapabilities(e){this._walletCapabilities=e,this.storeItemToStorage(gr,e)}storeItemToStorage(e,t){this.storage.setItem(e,JSON.stringify(t))}loadItemFromStorage(e){let t=this.storage.getItem(e);return t?JSON.parse(t):void 0}clear(){this.storage.clear()}};Me.SCWStateManager=ct});var mr=h(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.SCWSigner=void 0;var cn=dr(),dn=pr(),Ae=L(),fr=R(),Le=rt(),dt=class{constructor(e){this.metadata=e.metadata,this.communicator=e.communicator,this.keyManager=new cn.SCWKeyManager,this.stateManager=new dn.SCWStateManager({appChainIds:this.metadata.appChainIds,updateListener:e.updateListener}),this.handshake=this.handshake.bind(this),this.request=this.request.bind(this),this.createRequestMessage=this.createRequestMessage.bind(this),this.decryptResponseMessage=this.decryptResponseMessage.bind(this)}handshake(){return d(this,null,function*(){let e=yield this.createRequestMessage({handshake:{method:"eth_requestAccounts",params:this.metadata}}),t=yield this.communicator.postRequestAndWaitForResponse(e);if("failure"in t.content)throw t.content.failure;let s=yield(0,Le.importKeyFromHexString)("public",t.sender);yield this.keyManager.setPeerPublicKey(s);let n=yield this.decryptResponseMessage(t);this.updateInternalState({method:"eth_requestAccounts"},n);let a=n.result;if("error"in a)throw a.error;return this.stateManager.accounts})}request(e){return d(this,null,function*(){let t=this.tryLocalHandling(e);if(t!==void 0){if(t instanceof Error)throw t;return t}yield this.communicator.waitForPopupLoaded();let s=yield this.sendEncryptedRequest(e),n=yield this.decryptResponseMessage(s);this.updateInternalState(e,n);let a=n.result;if("error"in a)throw a.error;return a.value})}disconnect(){return d(this,null,function*(){this.stateManager.clear(),yield this.keyManager.clear()})}tryLocalHandling(e){var t;switch(e.method){case"wallet_switchEthereumChain":{let s=e.params;if(!s||!(!((t=s[0])===null||t===void 0)&&t.chainId))throw Ae.standardErrors.rpc.invalidParams();let n=(0,fr.ensureIntNumber)(s[0].chainId);return this.stateManager.switchChain(n)?null:void 0}case"wallet_getCapabilities":{let s=this.stateManager.walletCapabilities;if(!s)throw Ae.standardErrors.provider.unauthorized("No wallet capabilities found, please disconnect and reconnect");return s}default:return}}sendEncryptedRequest(e){return d(this,null,function*(){let t=yield this.keyManager.getSharedSecret();if(!t)throw Ae.standardErrors.provider.unauthorized("No valid session found, try requestAccounts before other methods");let s=yield(0,Le.encryptContent)({action:e,chainId:this.stateManager.activeChain.id},t),n=yield this.createRequestMessage({encrypted:s});return this.communicator.postRequestAndWaitForResponse(n)})}createRequestMessage(e){return d(this,null,function*(){let t=yield(0,Le.exportKeyToHexString)("public",yield this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),sender:t,content:e,timestamp:new Date}})}decryptResponseMessage(e){return d(this,null,function*(){let t=e.content;if("failure"in t)throw t.failure;let s=yield this.keyManager.getSharedSecret();if(!s)throw Ae.standardErrors.provider.unauthorized("Invalid session");return(0,Le.decryptContent)(t.encrypted,s)})}updateInternalState(e,t){var s,n;let a=(s=t.data)===null||s===void 0?void 0:s.chains;a&&this.stateManager.updateAvailableChains(a);let i=(n=t.data)===null||n===void 0?void 0:n.capabilities;i&&this.stateManager.updateWalletCapabilities(i);let o=t.result;if(!("error"in o))switch(e.method){case"eth_requestAccounts":{let c=o.value;this.stateManager.updateAccounts(c);break}case"wallet_switchEthereumChain":{if(o.value!==null)return;let c=e.params,u=(0,fr.ensureIntNumber)(c[0].chainId);this.stateManager.switchChain(u);break}default:break}}};Re.SCWSigner=dt});var ut=h((ca,Er)=>{"use strict";var un=ws();function br(r){return Buffer.allocUnsafe(r).fill(0)}function ln(r){return r.toString(2).length}function yr(r,e){let t=r.toString(16);t.length%2!==0&&(t="0"+t);let s=t.match(/.{1,2}/g).map(n=>parseInt(n,16));for(;s.length<e;)s.unshift(0);return Buffer.from(s)}function hn(r,e){let t=r<0n,s;if(t){let n=(1n<<BigInt(e))-1n;s=(~r&n)+1n}else s=r;return s&=(1n<<BigInt(e))-1n,s}function wr(r,e,t){let s=br(e);return r=xe(r),t?r.length<e?(r.copy(s),s):r.slice(0,e):r.length<e?(r.copy(s,e-r.length),s):r.slice(-e)}function gn(r,e){return wr(r,e,!0)}function xe(r){if(!Buffer.isBuffer(r))if(Array.isArray(r))r=Buffer.from(r);else if(typeof r=="string")_r(r)?r=Buffer.from(mn(vr(r)),"hex"):r=Buffer.from(r);else if(typeof r=="number")r=intToBuffer(r);else if(r==null)r=Buffer.allocUnsafe(0);else if(typeof r=="bigint")r=yr(r);else if(r.toArray)r=Buffer.from(r.toArray());else throw new Error("invalid type");return r}function pn(r){return r=xe(r),"0x"+r.toString("hex")}function fn(r,e){return r=xe(r),e||(e=256),un("keccak"+e).update(r).digest()}function mn(r){return r.length%2?"0"+r:r}function _r(r){return typeof r=="string"&&r.match(/^0x[0-9A-Fa-f]*$/)}function vr(r){return typeof r=="string"&&r.startsWith("0x")?r.slice(2):r}Er.exports={zeros:br,setLength:wr,setLengthRight:gn,isHexString:_r,stripHexPrefix:vr,toBuffer:xe,bufferToHex:pn,keccak:fn,bitLengthFromBigInt:ln,bufferBEFromBigInt:yr,twosFromBigInt:hn}});var Ar=h((da,Mr)=>{"use strict";var E=ut();function Cr(r){return r.startsWith("int[")?"int256"+r.slice(3):r==="int"?"int256":r.startsWith("uint[")?"uint256"+r.slice(4):r==="uint"?"uint256":r.startsWith("fixed[")?"fixed128x128"+r.slice(5):r==="fixed"?"fixed128x128":r.startsWith("ufixed[")?"ufixed128x128"+r.slice(6):r==="ufixed"?"ufixed128x128":r}function Z(r){return parseInt(/^\D+(\d+)$/.exec(r)[1],10)}function Sr(r){var e=/^\D+(\d+)x(\d+)$/.exec(r);return[parseInt(e[1],10),parseInt(e[2],10)]}function Ir(r){var e=r.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function K(r){var e=typeof r;if(e==="string"||e==="number")return BigInt(r);if(e==="bigint")return r;throw new Error("Argument is not a number")}function x(r,e){var t,s,n,a;if(r==="address")return x("uint160",K(e));if(r==="bool")return x("uint8",e?1:0);if(r==="string")return x("bytes",new Buffer(e,"utf8"));if(yn(r)){if(typeof e.length>"u")throw new Error("Not an array?");if(t=Ir(r),t!=="dynamic"&&t!==0&&e.length>t)throw new Error("Elements exceed array size: "+t);n=[],r=r.slice(0,r.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(a in e)n.push(x(r,e[a]));if(t==="dynamic"){var i=x("uint256",e.length);n.unshift(i)}return Buffer.concat(n)}else{if(r==="bytes")return e=new Buffer(e),n=Buffer.concat([x("uint256",e.length),e]),e.length%32!==0&&(n=Buffer.concat([n,E.zeros(32-e.length%32)])),n;if(r.startsWith("bytes")){if(t=Z(r),t<1||t>32)throw new Error("Invalid bytes<N> width: "+t);return E.setLengthRight(e,32)}else if(r.startsWith("uint")){if(t=Z(r),t%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);s=K(e);let o=E.bitLengthFromBigInt(s);if(o>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+o);if(s<0)throw new Error("Supplied uint is negative");return E.bufferBEFromBigInt(s,32)}else if(r.startsWith("int")){if(t=Z(r),t%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);s=K(e);let o=E.bitLengthFromBigInt(s);if(o>t)throw new Error("Supplied int exceeds width: "+t+" vs "+o);let c=E.twosFromBigInt(s,256);return E.bufferBEFromBigInt(c,32)}else if(r.startsWith("ufixed")){if(t=Sr(r),s=K(e),s<0)throw new Error("Supplied ufixed is negative");return x("uint256",s*BigInt(2)**BigInt(t[1]))}else if(r.startsWith("fixed"))return t=Sr(r),x("int256",K(e)*BigInt(2)**BigInt(t[1]))}throw new Error("Unsupported or invalid type: "+r)}function bn(r){return r==="string"||r==="bytes"||Ir(r)==="dynamic"}function yn(r){return r.lastIndexOf("]")===r.length-1}function wn(r,e){var t=[],s=[],n=32*r.length;for(var a in r){var i=Cr(r[a]),o=e[a],c=x(i,o);bn(i)?(t.push(x("uint256",n)),s.push(c),n+=c.length):t.push(c)}return Buffer.concat(t.concat(s))}function kr(r,e){if(r.length!==e.length)throw new Error("Number of types are not matching the values");for(var t,s,n=[],a=0;a<r.length;a++){var i=Cr(r[a]),o=e[a];if(i==="bytes")n.push(o);else if(i==="string")n.push(new Buffer(o,"utf8"));else if(i==="bool")n.push(new Buffer(o?"01":"00","hex"));else if(i==="address")n.push(E.setLength(o,20));else if(i.startsWith("bytes")){if(t=Z(i),t<1||t>32)throw new Error("Invalid bytes<N> width: "+t);n.push(E.setLengthRight(o,t))}else if(i.startsWith("uint")){if(t=Z(i),t%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);s=K(o);let c=E.bitLengthFromBigInt(s);if(c>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+c);n.push(E.bufferBEFromBigInt(s,t/8))}else if(i.startsWith("int")){if(t=Z(i),t%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);s=K(o);let c=E.bitLengthFromBigInt(s);if(c>t)throw new Error("Supplied int exceeds width: "+t+" vs "+c);let u=E.twosFromBigInt(s,t);n.push(E.bufferBEFromBigInt(u,t/8))}else throw new Error("Unsupported or invalid type: "+i)}return Buffer.concat(n)}function _n(r,e){return E.keccak(kr(r,e))}Mr.exports={rawEncode:wn,solidityPack:kr,soliditySHA3:_n}});var xr=h((ua,Rr)=>{"use strict";var A=ut(),de=Ar(),Lr={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},lt={encodeData(r,e,t,s=!0){let n=["bytes32"],a=[this.hashType(r,t)];if(s){let i=(o,c,u)=>{if(t[c]!==void 0)return["bytes32",u==null?"0x0000000000000000000000000000000000000000000000000000000000000000":A.keccak(this.encodeData(c,u,t,s))];if(u===void 0)throw new Error(`missing value for field ${o} of type ${c}`);if(c==="bytes")return["bytes32",A.keccak(u)];if(c==="string")return typeof u=="string"&&(u=Buffer.from(u,"utf8")),["bytes32",A.keccak(u)];if(c.lastIndexOf("]")===c.length-1){let g=c.slice(0,c.lastIndexOf("[")),f=u.map(_=>i(o,g,_));return["bytes32",A.keccak(de.rawEncode(f.map(([_])=>_),f.map(([,_])=>_)))]}return[c,u]};for(let o of t[r]){let[c,u]=i(o.name,o.type,e[o.name]);n.push(c),a.push(u)}}else for(let i of t[r]){let o=e[i.name];if(o!==void 0)if(i.type==="bytes")n.push("bytes32"),o=A.keccak(o),a.push(o);else if(i.type==="string")n.push("bytes32"),typeof o=="string"&&(o=Buffer.from(o,"utf8")),o=A.keccak(o),a.push(o);else if(t[i.type]!==void 0)n.push("bytes32"),o=A.keccak(this.encodeData(i.type,o,t,s)),a.push(o);else{if(i.type.lastIndexOf("]")===i.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");n.push(i.type),a.push(o)}}return de.rawEncode(n,a)},encodeType(r,e){let t="",s=this.findTypeDependencies(r,e).filter(n=>n!==r);s=[r].concat(s.sort());for(let n of s){if(!e[n])throw new Error("No type definition specified: "+n);t+=n+"("+e[n].map(({name:i,type:o})=>o+" "+i).join(",")+")"}return t},findTypeDependencies(r,e,t=[]){if(r=r.match(/^\w*/)[0],t.includes(r)||e[r]===void 0)return t;t.push(r);for(let s of e[r])for(let n of this.findTypeDependencies(s.type,e,t))!t.includes(n)&&t.push(n);return t},hashStruct(r,e,t,s=!0){return A.keccak(this.encodeData(r,e,t,s))},hashType(r,e){return A.keccak(this.encodeType(r,e))},sanitizeData(r){let e={};for(let t in Lr.properties)r[t]&&(e[t]=r[t]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(r,e=!0){let t=this.sanitizeData(r),s=[Buffer.from("1901","hex")];return s.push(this.hashStruct("EIP712Domain",t.domain,t.types,e)),t.primaryType!=="EIP712Domain"&&s.push(this.hashStruct(t.primaryType,t.message,t.types,e)),A.keccak(Buffer.concat(s))}};Rr.exports={TYPED_MESSAGE_SCHEMA:Lr,TypedDataUtils:lt,hashForSignTypedDataLegacy:function(r){return vn(r.data)},hashForSignTypedData_v3:function(r){return lt.hash(r.data,!1)},hashForSignTypedData_v4:function(r){return lt.hash(r.data)}};function vn(r){let e=new Error("Expect argument to be non-empty array");if(typeof r!="object"||!r.length)throw e;let t=r.map(function(a){return a.type==="bytes"?A.toBuffer(a.value):a.value}),s=r.map(function(a){return a.type}),n=r.map(function(a){if(!a.name)throw e;return a.type+" "+a.name});return de.soliditySHA3(["bytes32","bytes32"],[de.soliditySHA3(new Array(r.length).fill("string"),n),de.soliditySHA3(s,t)])}});var Pe=h(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.APP_VERSION_KEY=U.LOCAL_STORAGE_ADDRESSES_KEY=U.WALLET_USER_NAME_KEY=void 0;U.WALLET_USER_NAME_KEY="walletUsername";U.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";U.APP_VERSION_KEY="AppVersion"});var gt=h(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.RelayEventManager=void 0;var En=R(),ht=class{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;let e=this._nextRequestId,t=(0,En.prepend0x)(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}};Ne.RelayEventManager=ht});var Pr=h(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.WalletLinkCipher=void 0;var Oe=R(),pt=class{constructor(e){this.secret=e}encrypt(e){return d(this,null,function*(){let t=this.secret;if(t.length!==64)throw Error("secret must be 256 bits");let s=crypto.getRandomValues(new Uint8Array(12)),n=yield crypto.subtle.importKey("raw",(0,Oe.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=new TextEncoder,i=yield window.crypto.subtle.encrypt({name:"AES-GCM",iv:s},n,a.encode(e)),o=16,c=i.slice(i.byteLength-o),u=i.slice(0,i.byteLength-o),g=new Uint8Array(c),f=new Uint8Array(u),_=new Uint8Array([...s,...g,...f]);return(0,Oe.uint8ArrayToHex)(_)})}decrypt(e){return d(this,null,function*(){let t=this.secret;if(t.length!==64)throw Error("secret must be 256 bits");return new Promise((s,n)=>{(function(){return d(this,null,function*(){let a=yield crypto.subtle.importKey("raw",(0,Oe.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),i=(0,Oe.hexStringToUint8Array)(e),o=i.slice(0,12),c=i.slice(12,28),u=i.slice(28),g=new Uint8Array([...u,...c]),f={name:"AES-GCM",iv:new Uint8Array(o)};try{let _=yield window.crypto.subtle.decrypt(f,a,g),j=new TextDecoder;s(j.decode(_))}catch(_){n(_)}})})()})})}};Te.WalletLinkCipher=pt});var Nr=h(je=>{"use strict";Object.defineProperty(je,"__esModule",{value:!0});je.WalletLinkHTTP=void 0;var ft=class{constructor(e,t,s){this.linkAPIUrl=e,this.sessionId=t;let n=`${t}:${s}`;this.auth=`Basic ${btoa(n)}`}markUnseenEventsAsSeen(e){return d(this,null,function*(){return Promise.all(e.map(t=>fetch(`${this.linkAPIUrl}/events/${t.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(t=>console.error("Unabled to mark event as failed:",t))})}fetchUnseenEvents(){return d(this,null,function*(){var e;let t=yield fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){let{events:s,error:n}=yield t.json();if(n)throw new Error(`Check unseen events failed: ${n}`);let a=(e=s?.filter(i=>i.event==="Web3Response").map(i=>({type:"Event",sessionId:this.sessionId,eventId:i.id,event:i.event,data:i.data})))!==null&&e!==void 0?e:[];return this.markUnseenEventsAsSeen(a),a}throw new Error(`Check unseen events failed: ${t.status}`)})}};je.WalletLinkHTTP=ft});var Or=h(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.WalletLinkWebSocket=Y.ConnectionState=void 0;var G=function(r){return r[r.DISCONNECTED=0]="DISCONNECTED",r[r.CONNECTING=1]="CONNECTING",r[r.CONNECTED=2]="CONNECTED",r}(G||(Y.ConnectionState=G={})),mt=class{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}connect(){return d(this,null,function*(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((e,t)=>{var s;let n;try{this.webSocket=n=new this.WebSocketClass(this.url)}catch(a){t(a);return}(s=this.connectionStateListener)===null||s===void 0||s.call(this,G.CONNECTING),n.onclose=a=>{var i;this.clearWebSocket(),t(new Error(`websocket error ${a.code}: ${a.reason}`)),(i=this.connectionStateListener)===null||i===void 0||i.call(this,G.DISCONNECTED)},n.onopen=a=>{var i;e(),(i=this.connectionStateListener)===null||i===void 0||i.call(this,G.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(c=>this.sendData(c)),this.pendingData=[])},n.onmessage=a=>{var i,o;if(a.data==="h")(i=this.incomingDataListener)===null||i===void 0||i.call(this,{type:"Heartbeat"});else try{let c=JSON.parse(a.data);(o=this.incomingDataListener)===null||o===void 0||o.call(this,c)}catch{}}})})}disconnect(){var e;let{webSocket:t}=this;if(t){this.clearWebSocket(),(e=this.connectionStateListener)===null||e===void 0||e.call(this,G.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch{}}}sendData(e){let{webSocket:t}=this;if(!t){this.pendingData.push(e),this.connect();return}t.send(e)}clearWebSocket(){let{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}};Y.WalletLinkWebSocket=mt});var Dr=h(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.WalletLinkConnection=void 0;var Tr=Pe(),Sn=Pr(),Cn=Nr(),De=Or(),$=Ee(),jr=1e4,In=6e4,bt=class{constructor({session:e,linkAPIUrl:t,listener:s,WebSocketClass:n=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,$.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=i=>{if(!i)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",c=>i.JsonRpcUrl&&this.handleChainUpdated(c,i.JsonRpcUrl)]]).forEach((c,u)=>{let g=i[u];g!==void 0&&c(g)})},this.handleDestroyed=i=>{var o;i==="1"&&((o=this.listener)===null||o===void 0||o.resetAndReload())},this.handleAccountUpdated=i=>d(this,null,function*(){var o;{let c=yield this.cipher.decrypt(i);(o=this.listener)===null||o===void 0||o.accountUpdated(c)}}),this.handleMetadataUpdated=(i,o)=>d(this,null,function*(){var c;{let u=yield this.cipher.decrypt(o);(c=this.listener)===null||c===void 0||c.metadataUpdated(i,u)}}),this.handleWalletUsernameUpdated=i=>d(this,null,function*(){this.handleMetadataUpdated(Tr.WALLET_USER_NAME_KEY,i)}),this.handleAppVersionUpdated=i=>d(this,null,function*(){this.handleMetadataUpdated(Tr.APP_VERSION_KEY,i)}),this.handleChainUpdated=(i,o)=>d(this,null,function*(){var c;{let u=yield this.cipher.decrypt(i),g=yield this.cipher.decrypt(o);(c=this.listener)===null||c===void 0||c.chainUpdated(u,g)}}),this.session=e,this.cipher=new Sn.WalletLinkCipher(e.secret),this.listener=s;let a=new De.WalletLinkWebSocket(`${t}/rpc`,n);a.setConnectionStateListener(i=>d(this,null,function*(){let o=!1;switch(i){case De.ConnectionState.DISCONNECTED:if(!this.destroyed){let c=()=>d(this,null,function*(){yield new Promise(u=>setTimeout(u,5e3)),this.destroyed||a.connect().catch(()=>{c()})});c()}break;case De.ConnectionState.CONNECTED:try{yield this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),o=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},jr),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case De.ConnectionState.CONNECTING:break}this.connected!==o&&(this.connected=o)})),a.setIncomingDataListener(i=>{var o;switch(i.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{let c=i.type==="IsLinkedOK"?i.linked:void 0;this.linked=c||i.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(i.metadata);break}case"Event":{this.handleIncomingEvent(i);break}}i.id!==void 0&&((o=this.requestResolutions.get(i.id))===null||o===void 0||o(i))}),this.ws=a,this.http=new Cn.WalletLinkHTTP(t,e.id,e.key)}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}destroy(){this.destroyed=!0,this.ws.disconnect(),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(e){var t;this._connected=e,e&&((t=this.onceConnected)===null||t===void 0||t.call(this))}setOnceConnected(e){return new Promise(t=>{this.connected?e().then(t):this.onceConnected=()=>{e().then(t),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(e){var t,s;this._linked=e,e&&((t=this.onceLinked)===null||t===void 0||t.call(this)),(s=this.listener)===null||s===void 0||s.linkedUpdated(e)}setOnceLinked(e){return new Promise(t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}})}handleIncomingEvent(e){return d(this,null,function*(){var t;if(!(e.type!=="Event"||e.event!=="Web3Response")){let s=yield this.cipher.decrypt(e.data),n=JSON.parse(s);if(n.type!=="WEB3_RESPONSE")return;(t=this.listener)===null||t===void 0||t.handleWeb3ResponseMessage(n)}})}checkUnseenEvents(){return d(this,null,function*(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}yield new Promise(e=>setTimeout(e,250));try{yield this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}})}fetchUnseenEventsAPI(){return d(this,null,function*(){this.shouldFetchUnseenEventsOnConnect=!1,(yield this.http.fetchUnseenEvents()).forEach(t=>this.handleIncomingEvent(t))})}setSessionMetadata(e,t){return d(this,null,function*(){let s={type:"SetSessionConfig",id:(0,$.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[e]:t}};return this.setOnceConnected(()=>d(this,null,function*(){let n=yield this.makeRequest(s);if(n.type==="Fail")throw new Error(n.error||"failed to set session metadata")}))})}publishEvent(e,t,s=!1){return d(this,null,function*(){let n=yield this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),a={type:"PublishEvent",id:(0,$.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:e,data:n,callWebhook:s};return this.setOnceLinked(()=>d(this,null,function*(){let i=yield this.makeRequest(a);if(i.type==="Fail")throw new Error(i.error||"failed to publish event");return i.eventId}))})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>jr*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}makeRequest(s){return d(this,arguments,function*(e,t=In){let n=e.id;this.sendData(e);let a;return Promise.race([new Promise((i,o)=>{a=window.setTimeout(()=>{o(new Error(`request ${n} timed out`))},t)}),new Promise(i=>{this.requestResolutions.set(n,o=>{clearTimeout(a),i(o),this.requestResolutions.delete(n)})})])})}authenticate(){return d(this,null,function*(){let e={type:"HostSession",id:(0,$.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},t=yield this.makeRequest(e);if(t.type==="Fail")throw new Error(t.error||"failed to authenticate")})}sendIsLinked(){let e={type:"IsLinked",id:(0,$.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}sendGetSessionConfig(){let e={type:"GetSessionConfig",id:(0,$.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}};qe.WalletLinkConnection=bt});var Hr=h(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.WalletLinkSession=void 0;var kn=_s(),qr=R(),Ur="session:id",Wr="session:secret",Br="session:linked",yt=class r{constructor(e,t,s,n){this._storage=e,this._id=t||(0,qr.randomBytesHex)(16),this._secret=s||(0,qr.randomBytesHex)(32),this._key=new kn.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!n}static load(e){let t=e.getItem(Ur),s=e.getItem(Br),n=e.getItem(Wr);return t&&n?new r(e,t,n,s==="1"):null}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(Ur,this._id),this._storage.setItem(Wr,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(Br,this._linked?"1":"0")}};Ue.WalletLinkSession=yt});var ue=h(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.isDarkMode=P.isMobileWeb=P.getLocation=P.createQrUrl=void 0;function Mn(r,e,t,s,n,a){let i=s?"parent-id":"id",o=new URLSearchParams({[i]:r,secret:e,server:t,v:n,chainId:a.toString()}).toString();return`${t}/#/link?${o}`}P.createQrUrl=Mn;function An(){try{return window.frameElement!==null}catch{return!1}}function Ln(){try{return An()&&window.top?window.top.location:window.location}catch{return window.location}}P.getLocation=Ln;function Rn(){var r;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((r=window?.navigator)===null||r===void 0?void 0:r.userAgent)}P.isMobileWeb=Rn;function xn(){var r,e;return(e=(r=window?.matchMedia)===null||r===void 0?void 0:r.call(window,"(prefers-color-scheme: dark)").matches)!==null&&e!==void 0?e:!1}P.isDarkMode=xn});var Kr=h(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}'});var _t=h(J=>{"use strict";var Pn=J&&J.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(J,"__esModule",{value:!0});J.injectCssReset=void 0;var Nn=Pn(Kr());function On(){let r=document.createElement("style");r.type="text/css",r.appendChild(document.createTextNode(Nn.default)),document.documentElement.appendChild(r)}J.injectCssReset=On});var Fr=h(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"});var Ct=h(M=>{"use strict";var Vr=M&&M.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(M,"__esModule",{value:!0});M.SnackbarInstance=M.SnackbarContainer=M.Snackbar=void 0;var We=Vr((qt(),se(Dt))),b=(Wt(),se(Ut)),Et=(Es(),se(vs)),Tn=ue(),jn=Vr(Fr()),Dn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",qn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",St=class{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=(0,Tn.isDarkMode)()}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){let t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,b.render)((0,b.h)("div",null,(0,b.h)(M.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([e,t])=>(0,b.h)(M.SnackbarInstance,Object.assign({},t,{key:e}))))),this.root)}};M.Snackbar=St;var Un=r=>(0,b.h)("div",{class:(0,We.default)("-cbwsdk-snackbar-container")},(0,b.h)("style",null,jn.default),(0,b.h)("div",{class:"-cbwsdk-snackbar"},r.children));M.SnackbarContainer=Un;var Wn=({autoExpand:r,message:e,menuItems:t})=>{let[s,n]=(0,Et.useState)(!0),[a,i]=(0,Et.useState)(r??!1);(0,Et.useEffect)(()=>{let c=[window.setTimeout(()=>{n(!1)},1),window.setTimeout(()=>{i(!0)},1e4)];return()=>{c.forEach(window.clearTimeout)}});let o=()=>{i(!a)};return(0,b.h)("div",{class:(0,We.default)("-cbwsdk-snackbar-instance",s&&"-cbwsdk-snackbar-instance-hidden",a&&"-cbwsdk-snackbar-instance-expanded")},(0,b.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:o},(0,b.h)("img",{src:Dn,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,b.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},e),(0,b.h)("div",{class:"-gear-container"},!a&&(0,b.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,b.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,b.h)("img",{src:qn,class:"-gear-icon",title:"Expand"}))),t&&t.length>0&&(0,b.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},t.map((c,u)=>(0,b.h)("div",{class:(0,We.default)("-cbwsdk-snackbar-instance-menu-item",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:c.onClick,key:u},(0,b.h)("svg",{width:c.svgWidth,height:c.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,b.h)("path",{"fill-rule":c.defaultFillRule,"clip-rule":c.defaultClipRule,d:c.path,fill:"#AAAAAA"})),(0,b.h)("span",{class:(0,We.default)("-cbwsdk-snackbar-instance-menu-item-info",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},c.info)))))};M.SnackbarInstance=Wn});var zr=h(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.WalletLinkRelayUI=void 0;var Bn=_t(),Hn=Ct(),It=class{constructor(){this.attached=!1,this.snackbar=new Hn.Snackbar}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");let e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.snackbar.attach(t),this.attached=!0,(0,Bn.injectCssReset)()}showConnecting(e){let t;return e.isUnlinkedErrorState?t={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:t={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}};Be.WalletLinkRelayUI=It});var Zr=h(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"});var Yr=h(Q=>{"use strict";var Gr=Q&&Q.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q,"__esModule",{value:!0});Q.RedirectDialog=void 0;var Kn=Gr((qt(),se(Dt))),N=(Wt(),se(Ut)),Fn=_t(),Vn=Ct(),zn=ue(),Zn=Gr(Zr()),Mt=class{constructor(){this.root=null,this.darkMode=(0,zn.isDarkMode)()}attach(){let e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),(0,Fn.injectCssReset)()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,N.render)(null,this.root),e&&(0,N.render)((0,N.h)(Gn,Object.assign({},e,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}};Q.RedirectDialog=Mt;var Gn=({title:r,buttonText:e,darkMode:t,onButtonClick:s,onDismiss:n})=>{let a=t?"dark":"light";return(0,N.h)(Vn.SnackbarContainer,{darkMode:t},(0,N.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,N.h)("style",null,Zn.default),(0,N.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:n}),(0,N.h)("div",{class:(0,Kn.default)("-cbwsdk-redirect-dialog-box",a)},(0,N.h)("p",null,r),(0,N.h)("button",{onClick:s},e))))}});var He=h(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.CBW_MOBILE_DEEPLINK_URL=W.WALLETLINK_URL=W.CB_KEYS_URL=void 0;W.CB_KEYS_URL="https://keys.coinbase.com/connect";W.WALLETLINK_URL="https://www.walletlink.org";W.CBW_MOBILE_DEEPLINK_URL="https://go.cb-w.com/walletlink"});var $r=h(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.WLMobileRelayUI=void 0;var Yn=Yr(),$n=ue(),Jn=He(),At=class{constructor(){this.attached=!1,this.redirectDialog=new Yn.RedirectDialog}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(e){let t=new URL(Jn.CBW_MOBILE_DEEPLINK_URL);t.searchParams.append("redirect_url",(0,$n.getLocation)().href),e&&t.searchParams.append("wl_url",e);let s=document.createElement("a");s.target="cbw-opener",s.href=t.href,s.rel="noreferrer noopener",s.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}};Ke.WLMobileRelayUI=At});var Qr=h(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.WalletLinkRelay=void 0;var Qn=Dr(),Xn=Pe(),ei=gt(),Lt=Hr(),X=we(),ti=ue(),ri=zr(),Jr=$r(),si=L(),m=R(),ni=q(),Fe=class r{constructor(e){this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.isMobileWeb=(0,ti.isMobileWeb)(),this.appName="",this.appLogoUrl=null,this.linkedUpdated=a=>{this.isLinked=a;let i=this.storage.getItem(Xn.LOCAL_STORAGE_ADDRESSES_KEY);if(a&&(this._session.linked=a),this.isUnlinkedErrorState=!1,i){let o=i.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";o[0]!==""&&!a&&this._session.linked&&!c&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(a,i)=>{this.storage.setItem(a,i)},this.chainUpdated=(a,i)=>{this.chainCallbackParams.chainId===a&&this.chainCallbackParams.jsonRpcUrl===i||(this.chainCallbackParams={chainId:a,jsonRpcUrl:i},this.chainCallback&&this.chainCallback(a,i))},this.accountUpdated=a=>{this.accountsCallback&&this.accountsCallback([a]),r.accountRequestCallbackIds.size>0&&(Array.from(r.accountRequestCallbackIds.values()).forEach(i=>{let o={type:"WEB3_RESPONSE",id:i,response:{method:"requestEthereumAccounts",result:[a]}};this.invokeCallback(Object.assign(Object.assign({},o),{id:i}))}),r.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage;let{session:t,ui:s,connection:n}=this.subscribe();this._session=t,this.connection=n,this.relayEventManager=new ei.RelayEventManager,this.ui=s}subscribe(){let e=Lt.WalletLinkSession.load(this.storage)||new Lt.WalletLinkSession(this.storage).save(),{linkAPIUrl:t}=this,s=new Qn.WalletLinkConnection({session:e,linkAPIUrl:t,listener:this}),n=this.isMobileWeb?new Jr.WLMobileRelayUI:new ri.WalletLinkRelayUI;return s.connect(),{session:e,ui:n,connection:s}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(e=>setTimeout(()=>e(null),1e3))]).then(()=>{this.connection.destroy();let e=Lt.WalletLinkSession.load(this.storage);e?.id===this._session.id&&ni.ScopedLocalStorage.clearAll(),document.location.reload()}).catch(e=>{})}setAppInfo(e,t){this.appName=e,this.appLogoUrl=t}getStorageItem(e){return this.storage.getItem(e)}setStorageItem(e,t){this.storage.setItem(e,t)}signEthereumMessage(e,t,s,n){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,m.hexStringFromBuffer)(e,!0),address:t,addPrefix:s,typedDataJson:n||null}})}ethereumAddressFromSignedMessage(e,t,s){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,m.hexStringFromBuffer)(e,!0),signature:(0,m.hexStringFromBuffer)(t,!0),addPrefix:s}})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,m.bigIntStringFromBigInt)(e.weiValue),data:(0,m.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,m.bigIntStringFromBigInt)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,m.bigIntStringFromBigInt)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,m.bigIntStringFromBigInt)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,m.bigIntStringFromBigInt)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,m.bigIntStringFromBigInt)(e.weiValue),data:(0,m.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,m.bigIntStringFromBigInt)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,m.bigIntStringFromBigInt)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,m.bigIntStringFromBigInt)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,m.bigIntStringFromBigInt)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,m.hexStringFromBuffer)(e,!0),chainId:t}})}scanQRCode(e){return this.sendRequest({method:"scanQRCode",params:{regExp:e}})}getWalletLinkSession(){return this._session}genericRequest(e,t){return this.sendRequest({method:"generic",params:{action:t,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let t=null,s=(0,m.randomBytesHex)(8),n=a=>{this.publishWeb3RequestCanceledEvent(s),this.handleErrorResponse(s,e.method,a),t?.()};return new Promise((a,i)=>{t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:n,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(s,o=>{if(t?.(),(0,X.isErrorResponse)(o))return i(new Error(o.errorMessage));a(o)}),this.publishWeb3RequestEvent(s,e)})}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChain=e}publishWeb3RequestEvent(e,t){let s={type:"WEB3_REQUEST",id:e,request:t};this.publishEvent("Web3Request",s,!0).then(n=>{}).catch(n=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:s.id,response:{method:t.method,errorMessage:n.message}})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(t.method)}openCoinbaseWalletDeeplink(e){if(this.ui instanceof Jr.WLMobileRelayUI)switch(e){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(e){let t={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",t,!1).then()}publishEvent(e,t,s){return this.connection.publishEvent(e,t,s)}handleWeb3ResponseMessage(e){let{response:t}=e;if(t.method==="requestEthereumAccounts"){r.accountRequestCallbackIds.forEach(s=>this.invokeCallback(Object.assign(Object.assign({},e),{id:s}))),r.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,t,s){var n;let a=(n=s?.message)!==null&&n!==void 0?n:"Unspecified error message.";this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:{method:t,errorMessage:a}})}invokeCallback(e){let t=this.relayEventManager.callbacks.get(e.id);t&&(t(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){let e={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},t=null,s=(0,m.randomBytesHex)(8);return new Promise((n,a)=>{this.relayEventManager.callbacks.set(s,i=>{if(t?.(),(0,X.isErrorResponse)(i))return a(new Error(i.errorMessage));n(i)}),r.accountRequestCallbackIds.add(s),this.publishWeb3RequestEvent(s,e)})}watchAsset(e,t,s,n,a,i){let o={method:"watchAsset",params:{type:e,options:{address:t,symbol:s,decimals:n,image:a},chainId:i}},c=null,u=(0,m.randomBytesHex)(8),g=f=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,f),c?.()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:g,onResetConnection:this.resetAndReload}),new Promise((f,_)=>{this.relayEventManager.callbacks.set(u,j=>{if(c?.(),(0,X.isErrorResponse)(j))return _(new Error(j.errorMessage));f(j)}),this.publishWeb3RequestEvent(u,o)})}addEthereumChain(e,t,s,n,a,i){let o={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:n,chainName:a,iconUrls:s,nativeCurrency:i}},c=null,u=(0,m.randomBytesHex)(8),g=f=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,f),c?.()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:g,onResetConnection:this.resetAndReload}),new Promise((f,_)=>{this.relayEventManager.callbacks.set(u,j=>{if(c?.(),(0,X.isErrorResponse)(j))return _(new Error(j.errorMessage));f(j)}),this.publishWeb3RequestEvent(u,o)})}switchEthereumChain(e,t){let s={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},n=(0,m.randomBytesHex)(8);return new Promise((a,i)=>{this.relayEventManager.callbacks.set(n,o=>{if((0,X.isErrorResponse)(o)&&o.errorCode)return i(si.standardErrors.provider.custom({code:o.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,X.isErrorResponse)(o))return i(new Error(o.errorMessage));a(o)}),this.publishWeb3RequestEvent(n,s)})}};Ve.WalletLinkRelay=Fe;Fe.accountRequestCallbackIds=new Set});var rs=h(ee=>{"use strict";var ii=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ee,"__esModule",{value:!0});ee.WalletLinkSigner=void 0;var Rt=ii(xr()),Xr=Pe(),ai=gt(),D=we(),oi=Qr(),es=He(),w=L(),p=R(),ci=q(),xt="DefaultChainId",ts="DefaultJsonRpcUrl",Pt=class{constructor(e){var t,s;this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1;let{appName:n,appLogoUrl:a}=e.metadata;this._appName=n,this._appLogoUrl=a,this._storage=new ci.ScopedLocalStorage("walletlink",es.WALLETLINK_URL),this.updateListener=e.updateListener,this._relayEventManager=new ai.RelayEventManager,this._jsonRpcUrlFromOpts="";let i=this._storage.getItem(Xr.LOCAL_STORAGE_ADDRESSES_KEY);if(i){let c=i.split(" ");c[0]!==""&&(this._addresses=c.map(u=>(0,p.ensureAddressString)(u)),(t=this.updateListener)===null||t===void 0||t.onAccountsUpdate({accounts:this._addresses,source:"storage"}))}this._storage.getItem(xt)&&((s=this.updateListener)===null||s===void 0||s.onChainUpdate({chain:{id:this.getChainId(),rpcUrl:this.jsonRpcUrl},source:"storage"}),this.hasMadeFirstChainChangedEmission=!0),this.initializeRelay()}getSession(){let e=this.initializeRelay(),{id:t,secret:s}=e.getWalletLinkSession();return{id:t,secret:s}}handshake(){return d(this,null,function*(){return yield this.request({method:"eth_requestAccounts"})})}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(ts))!==null&&e!==void 0?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(ts,e)}updateProviderInfo(e,t){var s;this.jsonRpcUrl=e;let n=this.getChainId();this._storage.setItem(xt,t.toString(10)),((0,p.ensureIntNumber)(t)!==n||!this.hasMadeFirstChainChangedEmission)&&((s=this.updateListener)===null||s===void 0||s.onChainUpdate({chain:{id:t,rpcUrl:e},source:"wallet"}),this.hasMadeFirstChainChangedEmission=!0)}watchAsset(e,t,s,n,a,i){return d(this,null,function*(){let c=yield this.initializeRelay().watchAsset(e,t,s,n,a,i?.toString());return(0,D.isErrorResponse)(c)?!1:!!c.result})}addEthereumChain(e,t,s,n,a,i){return d(this,null,function*(){var o,c;if((0,p.ensureIntNumber)(e)===this.getChainId())return!1;let u=this.initializeRelay();this._isAuthorized()||(yield u.requestEthereumAccounts());let g=yield u.addEthereumChain(e.toString(),t,a,s,n,i);return(0,D.isErrorResponse)(g)?!1:(((o=g.result)===null||o===void 0?void 0:o.isApproved)===!0&&this.updateProviderInfo(t[0],e),((c=g.result)===null||c===void 0?void 0:c.isApproved)===!0)})}switchEthereumChain(e){return d(this,null,function*(){let s=yield this.initializeRelay().switchEthereumChain(e.toString(10),this.selectedAddress||void 0);if((0,D.isErrorResponse)(s)){if(!s.errorCode)return;throw s.errorCode===w.standardErrorCodes.provider.unsupportedChain?w.standardErrors.provider.unsupportedChain():w.standardErrors.provider.custom({message:s.errorMessage,code:s.errorCode})}let n=s.result;n.isApproved&&n.rpcUrl.length>0&&this.updateProviderInfo(n.rpcUrl,e)})}disconnect(){return d(this,null,function*(){this._relay&&this._relay.resetAndReload(),this._storage.clear()})}request(e){return d(this,null,function*(){try{return this._request(e).catch(t=>{throw t})}catch(t){return Promise.reject(t)}})}_request(e){return d(this,null,function*(){if(!e||typeof e!="object"||Array.isArray(e))throw w.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});let{method:t,params:s}=e;if(typeof t!="string"||t.length===0)throw w.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(s!==void 0&&!Array.isArray(s)&&(typeof s!="object"||s===null))throw w.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});let n=s===void 0?[]:s,a=this._relayEventManager.makeRequestId();return(yield this._sendRequestAsync({method:t,params:n,jsonrpc:"2.0",id:a})).result})}_setAddresses(e,t){var s;if(!Array.isArray(e))throw new Error("addresses is not an array");let n=e.map(a=>(0,p.ensureAddressString)(a));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,(s=this.updateListener)===null||s===void 0||s.onAccountsUpdate({accounts:n,source:"wallet"}),this._storage.setItem(Xr.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(e){return new Promise((t,s)=>{try{let n=this._handleSynchronousMethods(e);if(n!==void 0)return t({jsonrpc:"2.0",id:e.id,result:n})}catch(n){return s(n)}this._handleAsynchronousMethods(e).then(n=>n&&t(Object.assign(Object.assign({},n),{id:e.id}))).catch(n=>s(n))})}_handleSynchronousMethods(e){let{method:t}=e;switch(t){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}_handleAsynchronousMethods(e){return d(this,null,function*(){let{method:t}=e,s=e.params||[];switch(t){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(s);case"eth_ecRecover":return this._eth_ecRecover(s);case"personal_sign":return this._personal_sign(s);case"personal_ecRecover":return this._personal_ecRecover(s);case"eth_signTransaction":return this._eth_signTransaction(s);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(s);case"eth_sendTransaction":return this._eth_sendTransaction(s);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(s);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(s);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(s);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(s);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(s);case"wallet_watchAsset":return this._wallet_watchAsset(s);default:return this._throwUnsupportedMethodError()}})}_isKnownAddress(e){try{let t=(0,p.ensureAddressString)(e);return this._addresses.map(n=>(0,p.ensureAddressString)(n)).includes(t)}catch{}return!1}_ensureKnownAddress(e){if(!this._isKnownAddress(e))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(e){let t=e.from?(0,p.ensureAddressString)(e.from):this.selectedAddress;if(!t)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(t);let s=e.to?(0,p.ensureAddressString)(e.to):null,n=e.value!=null?(0,p.ensureBigInt)(e.value):BigInt(0),a=e.data?(0,p.ensureBuffer)(e.data):Buffer.alloc(0),i=e.nonce!=null?(0,p.ensureIntNumber)(e.nonce):null,o=e.gasPrice!=null?(0,p.ensureBigInt)(e.gasPrice):null,c=e.maxFeePerGas!=null?(0,p.ensureBigInt)(e.maxFeePerGas):null,u=e.maxPriorityFeePerGas!=null?(0,p.ensureBigInt)(e.maxPriorityFeePerGas):null,g=e.gas!=null?(0,p.ensureBigInt)(e.gas):null,f=e.chainId?(0,p.ensureIntNumber)(e.chainId):this.getChainId();return{fromAddress:t,toAddress:s,weiValue:n,data:a,nonce:i,gasPriceInWei:o,maxFeePerGas:c,maxPriorityFeePerGas:u,gasLimit:g,chainId:f}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw w.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw w.standardErrors.provider.unsupportedMethod({})}_signEthereumMessage(e,t,s,n){return d(this,null,function*(){this._ensureKnownAddress(t);try{let i=yield this.initializeRelay().signEthereumMessage(e,t,s,n);if((0,D.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(a){throw typeof a.message=="string"&&a.message.match(/(denied|rejected)/i)?w.standardErrors.provider.userRejectedRequest("User denied message signature"):a}})}_ethereumAddressFromSignedMessage(e,t,s){return d(this,null,function*(){let a=yield this.initializeRelay().ethereumAddressFromSignedMessage(e,t,s);if((0,D.isErrorResponse)(a))throw new Error(a.errorMessage);return{jsonrpc:"2.0",id:0,result:a.result}})}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,p.hexStringFromIntNumber)(this.getChainId())}getChainId(){let e=this._storage.getItem(xt);if(!e)return(0,p.ensureIntNumber)(1);let t=parseInt(e,10);return(0,p.ensureIntNumber)(t)}_eth_requestAccounts(){return d(this,null,function*(){if(this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let e;try{if(e=yield this.initializeRelay().requestEthereumAccounts(),(0,D.isErrorResponse)(e))throw new Error(e.errorMessage)}catch(t){throw typeof t.message=="string"&&t.message.match(/(denied|rejected)/i)?w.standardErrors.provider.userRejectedRequest("User denied account authorization"):t}if(!e.result)throw new Error("accounts received is empty");return this._setAddresses(e.result),{jsonrpc:"2.0",id:0,result:this._addresses}})}_eth_sign(e){this._requireAuthorization();let t=(0,p.ensureAddressString)(e[0]),s=(0,p.ensureBuffer)(e[1]);return this._signEthereumMessage(s,t,!1)}_eth_ecRecover(e){let t=(0,p.ensureBuffer)(e[0]),s=(0,p.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,s,!1)}_personal_sign(e){this._requireAuthorization();let t=(0,p.ensureBuffer)(e[0]),s=(0,p.ensureAddressString)(e[1]);return this._signEthereumMessage(t,s,!0)}_personal_ecRecover(e){let t=(0,p.ensureBuffer)(e[0]),s=(0,p.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,s,!0)}_eth_signTransaction(e){return d(this,null,function*(){this._requireAuthorization();let t=this._prepareTransactionParams(e[0]||{});try{let n=yield this.initializeRelay().signEthereumTransaction(t);if((0,D.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?w.standardErrors.provider.userRejectedRequest("User denied transaction signature"):s}})}_eth_sendRawTransaction(e){return d(this,null,function*(){let t=(0,p.ensureBuffer)(e[0]),n=yield this.initializeRelay().submitEthereumTransaction(t,this.getChainId());if((0,D.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}})}_eth_sendTransaction(e){return d(this,null,function*(){this._requireAuthorization();let t=this._prepareTransactionParams(e[0]||{});try{let n=yield this.initializeRelay().signAndSubmitEthereumTransaction(t);if((0,D.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?w.standardErrors.provider.userRejectedRequest("User denied transaction signature"):s}})}_eth_signTypedData_v1(e){return d(this,null,function*(){this._requireAuthorization();let t=(0,p.ensureParsedJSONObject)(e[0]),s=(0,p.ensureAddressString)(e[1]);this._ensureKnownAddress(s);let n=Rt.default.hashForSignTypedDataLegacy({data:t}),a=JSON.stringify(t,null,2);return this._signEthereumMessage(n,s,!1,a)})}_eth_signTypedData_v3(e){return d(this,null,function*(){this._requireAuthorization();let t=(0,p.ensureAddressString)(e[0]),s=(0,p.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);let n=Rt.default.hashForSignTypedData_v3({data:s}),a=JSON.stringify(s,null,2);return this._signEthereumMessage(n,t,!1,a)})}_eth_signTypedData_v4(e){return d(this,null,function*(){this._requireAuthorization();let t=(0,p.ensureAddressString)(e[0]),s=(0,p.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);let n=Rt.default.hashForSignTypedData_v4({data:s}),a=JSON.stringify(s,null,2);return this._signEthereumMessage(n,t,!1,a)})}_wallet_addEthereumChain(e){return d(this,null,function*(){var t,s,n,a;let i=e[0];if(((t=i.rpcUrls)===null||t===void 0?void 0:t.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!i.chainName||i.chainName.trim()==="")throw w.standardErrors.rpc.invalidParams("chainName is a required field");if(!i.nativeCurrency)throw w.standardErrors.rpc.invalidParams("nativeCurrency is a required field");let o=parseInt(i.chainId,16);return(yield this.addEthereumChain(o,(s=i.rpcUrls)!==null&&s!==void 0?s:[],(n=i.blockExplorerUrls)!==null&&n!==void 0?n:[],i.chainName,(a=i.iconUrls)!==null&&a!==void 0?a:[],i.nativeCurrency))?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}})}_wallet_switchEthereumChain(e){return d(this,null,function*(){let t=e[0];return yield this.switchEthereumChain(parseInt(t.chainId,16)),{jsonrpc:"2.0",id:0,result:null}})}_wallet_watchAsset(e){return d(this,null,function*(){let t=Array.isArray(e)?e[0]:e;if(!t.type)throw w.standardErrors.rpc.invalidParams("Type is required");if(t?.type!=="ERC20")throw w.standardErrors.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!t?.options)throw w.standardErrors.rpc.invalidParams("Options are required");if(!t?.options.address)throw w.standardErrors.rpc.invalidParams("Address is required");let s=this.getChainId(),{address:n,symbol:a,image:i,decimals:o}=t.options;return{jsonrpc:"2.0",id:0,result:yield this.watchAsset(t.type,n,a,o,i,s)}})}initializeRelay(){if(!this._relay){let e=new oi.WalletLinkRelay({linkAPIUrl:es.WALLETLINK_URL,storage:this._storage});e.setAppInfo(this._appName,this._appLogoUrl),e.attachUI(),e.setAccountsCallback((t,s)=>this._setAddresses(t,s)),e.setChainCallback((t,s)=>{this.updateProviderInfo(s,parseInt(t,10))}),this._relay=e}return this._relay}};ee.WalletLinkSigner=Pt});var Ze=h(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.checkErrorForInvalidRequestArgs=O.getCoinbaseInjectedProvider=O.getCoinbaseInjectedSigner=O.fetchRPCRequest=void 0;var di=ie(),ze=L();function ui(r,e){return d(this,null,function*(){if(!e.rpcUrl)throw ze.standardErrors.rpc.internal("No RPC URL set for chain");let t=Object.assign(Object.assign({},r),{jsonrpc:"2.0",id:crypto.randomUUID()});return(yield(yield window.fetch(e.rpcUrl,{method:"POST",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":di.LIB_VERSION}})).json()).result})}O.fetchRPCRequest=ui;function ss(){return globalThis.coinbaseWalletSigner}O.getCoinbaseInjectedSigner=ss;function li({metadata:r,preference:e}){var t,s,n;let a=globalThis;if(e.options!=="smartWalletOnly"){if(ss())return;let c=a.coinbaseWalletExtension;if(c){let{appName:u,appLogoUrl:g,appChainIds:f}=r;return(t=c.setAppInfo)===null||t===void 0||t.call(c,u,g,f),c}}let i=(s=a.ethereum)!==null&&s!==void 0?s:(n=a.top)===null||n===void 0?void 0:n.ethereum;if(i?.isCoinbaseBrowser)return i}O.getCoinbaseInjectedProvider=li;function hi(r){if(!r||typeof r!="object"||Array.isArray(r))return ze.standardErrors.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:r});let{method:e,params:t}=r;if(typeof e!="string"||e.length===0)return ze.standardErrors.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:r});if(t!==void 0&&!Array.isArray(t)&&(typeof t!="object"||t===null))return ze.standardErrors.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:r})}O.checkErrorForInvalidRequestArgs=hi});var os=h(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.createSigner=T.fetchSignerType=T.storeSignerType=T.loadSignerType=void 0;var gi=mr(),ns=rs(),pi=L(),fi=Ze(),mi=q(),is="SignerType",as=new mi.ScopedLocalStorage("CBWSDK","SignerConfigurator");function bi(){return as.getItem(is)}T.loadSignerType=bi;function yi(r){as.setItem(is,r)}T.storeSignerType=yi;function wi(r){return d(this,null,function*(){let{communicator:e,metadata:t}=r;vi(e,t).catch(()=>{});let s={id:crypto.randomUUID(),event:"selectSignerType",data:r.preference},{data:n}=yield e.postRequestAndWaitForResponse(s);return n})}T.fetchSignerType=wi;function _i(r){let{signerType:e,metadata:t,communicator:s,updateListener:n}=r;switch(e){case"scw":return new gi.SCWSigner({metadata:t,updateListener:n,communicator:s});case"walletlink":return new ns.WalletLinkSigner({metadata:t,updateListener:n});case"extension":{let a=(0,fi.getCoinbaseInjectedSigner)();if(!a)throw pi.standardErrors.rpc.internal("injected signer not found");return a}}}T.createSigner=_i;function vi(r,e){return d(this,null,function*(){yield r.onMessage(({event:s})=>s==="WalletLinkSessionRequest");let t=new ns.WalletLinkSigner({metadata:e});r.postMessage({event:"WalletLinkUpdate",data:{session:t.getSession()}}),yield t.handshake(),r.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})})}});var us=h(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.closePopup=te.openPopup=void 0;var Ei=L(),cs=420,ds=540;function Si(r){let e=(window.innerWidth-cs)/2+window.screenX,t=(window.innerHeight-ds)/2+window.screenY,s=window.open(r,"Smart Wallet",`width=${cs}, height=${ds}, left=${e}, top=${t}`);if(s?.focus(),!s)throw Ei.standardErrors.rpc.internal("Pop up window failed to open");return s}te.openPopup=Si;function Ci(r){r&&!r.closed&&r.close()}te.closePopup=Ci});var gs=h(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.Communicator=void 0;var Ii=ie(),ls=us(),ki=He(),hs=L(),Nt=class{constructor(e=ki.CB_KEYS_URL){this.popup=null,this.listeners=new Map,this.postMessage=t=>d(this,null,function*(){(yield this.waitForPopupLoaded()).postMessage(t,this.url.origin)}),this.postRequestAndWaitForResponse=t=>d(this,null,function*(){let s=this.onMessage(({requestId:n})=>n===t.id);return this.postMessage(t),yield s}),this.onMessage=t=>d(this,null,function*(){return new Promise((s,n)=>{let a=i=>{if(i.origin!==this.url.origin)return;let o=i.data;t(o)&&(s(o),window.removeEventListener("message",a),this.listeners.delete(a))};window.addEventListener("message",a),this.listeners.set(a,{reject:n})})}),this.disconnect=()=>{(0,ls.closePopup)(this.popup),this.popup=null,this.listeners.forEach(({reject:t},s)=>{t(hs.standardErrors.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",s)}),this.listeners.clear()},this.waitForPopupLoaded=()=>d(this,null,function*(){return this.popup&&!this.popup.closed?this.popup:(this.popup=(0,ls.openPopup)(this.url),this.onMessage(({event:t})=>t==="PopupUnload").then(this.disconnect).catch(()=>{}),this.onMessage(({event:t})=>t==="PopupLoaded").then(t=>{this.postMessage({requestId:t.id,data:{version:Ii.LIB_VERSION}})}).then(()=>{if(!this.popup)throw hs.standardErrors.rpc.internal();return this.popup}))}),this.url=new URL(e)}};Ge.Communicator=Nt});var fs=h(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.determineMethodCategory=void 0;var ps={handshake:["eth_requestAccounts"],sign:["eth_ecRecover","personal_sign","personal_ecRecover","eth_signTransaction","eth_sendTransaction","eth_signTypedData_v1","eth_signTypedData_v3","eth_signTypedData_v4","eth_signTypedData","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_watchAsset","wallet_getCapabilities","wallet_sendCalls","wallet_showCallsStatus"],state:["eth_chainId","eth_accounts","eth_coinbase","net_version"],deprecated:["eth_sign","eth_signTypedData_v2"],unsupported:["eth_subscribe","eth_unsubscribe"],fetch:[]};function Mi(r){for(let e in ps){let t=e;if(ps[t].includes(r))return t}}Ye.determineMethodCategory=Mi});var bs=h(B=>{"use strict";var Ai=B&&B.__rest||function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(r);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(r,s[n])&&(t[s[n]]=r[s[n]]);return t},Li=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});B.CoinbaseWalletProvider=void 0;var Ri=Li(ys()),re=L(),xi=Jt(),$e=Ee(),le=R(),Je=os(),ms=Ze(),Pi=gs(),Ni=fs(),Oi=q(),Ot=class extends Ri.default{constructor(e){var t,s,{metadata:n}=e,a=e.preference,{keysUrl:i}=a,o=Ai(a,["keysUrl"]);super(),this.accounts=[],this.handlers={handshake:u=>d(this,null,function*(){try{if(this.connected)return this.emit("connect",{chainId:(0,le.hexStringFromIntNumber)((0,$e.IntNumber)(this.chain.id))}),this.accounts;let g=yield this.requestSignerSelection(),f=this.initSigner(g),_=yield f.handshake();return this.signer=f,(0,Je.storeSignerType)(g),this.emit("connect",{chainId:(0,le.hexStringFromIntNumber)((0,$e.IntNumber)(this.chain.id))}),_}catch(g){throw this.handleUnauthorizedError(g),g}}),sign:u=>d(this,null,function*(){if(!this.connected||!this.signer)throw re.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods");try{return yield this.signer.request(u)}catch(g){throw this.handleUnauthorizedError(g),g}}),fetch:u=>(0,ms.fetchRPCRequest)(u,this.chain),state:u=>{let g=()=>{if(this.connected)return this.accounts;throw re.standardErrors.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")};switch(u.method){case"eth_chainId":return(0,le.hexStringFromIntNumber)((0,$e.IntNumber)(this.chain.id));case"net_version":return this.chain.id;case"eth_accounts":return g();case"eth_coinbase":return g()[0];default:return this.handlers.unsupported(u)}},deprecated:({method:u})=>{throw re.standardErrors.rpc.methodNotSupported(`Method ${u} is deprecated.`)},unsupported:({method:u})=>{throw re.standardErrors.rpc.methodNotSupported(`Method ${u} is not supported.`)}},this.isCoinbaseWallet=!0,this.updateListener={onAccountsUpdate:({accounts:u,source:g})=>{(0,le.areAddressArraysEqual)(this.accounts,u)||(this.accounts=u,g!=="storage"&&this.emit("accountsChanged",this.accounts))},onChainUpdate:({chain:u,source:g})=>{u.id===this.chain.id&&u.rpcUrl===this.chain.rpcUrl||(this.chain=u,g!=="storage"&&this.emit("chainChanged",(0,le.hexStringFromIntNumber)((0,$e.IntNumber)(u.id))))}},this.metadata=n,this.preference=o,this.communicator=new Pi.Communicator(i),this.chain={id:(s=(t=n.appChainIds)===null||t===void 0?void 0:t[0])!==null&&s!==void 0?s:1};let c=(0,Je.loadSignerType)();this.signer=c?this.initSigner(c):null}get connected(){return this.accounts.length>0}request(e){return d(this,null,function*(){var t;try{let s=(0,ms.checkErrorForInvalidRequestArgs)(e);if(s)throw s;let n=(t=(0,Ni.determineMethodCategory)(e.method))!==null&&t!==void 0?t:"fetch";return this.handlers[n](e)}catch(s){return Promise.reject((0,xi.serializeError)(s,e.method))}})}handleUnauthorizedError(e){e.code===re.standardErrorCodes.provider.unauthorized&&this.disconnect()}enable(){return d(this,null,function*(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),yield this.request({method:"eth_requestAccounts"})})}disconnect(){return d(this,null,function*(){this.accounts=[],this.chain={id:1},Oi.ScopedLocalStorage.clearAll(),this.emit("disconnect",re.standardErrors.provider.disconnected("User initiated disconnection"))})}requestSignerSelection(){return(0,Je.fetchSignerType)({communicator:this.communicator,preference:this.preference,metadata:this.metadata})}initSigner(e){return(0,Je.createSigner)({signerType:e,metadata:this.metadata,communicator:this.communicator,updateListener:this.updateListener})}};B.CoinbaseWalletProvider=Ot});var jt=h(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.CoinbaseWalletSDK=void 0;var Ti=Bt(),ji=bs(),Di=q(),qi=ie(),Ui=R(),Wi=Ze(),Tt=class{constructor(e){this.metadata={appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||(0,Ui.getFavicon)(),appChainIds:e.appChainIds||[]},this.storeLatestVersion()}makeWeb3Provider(e={options:"all"}){var t;let s={metadata:this.metadata,preference:e};return(t=(0,Wi.getCoinbaseInjectedProvider)(s))!==null&&t!==void 0?t:new ji.CoinbaseWalletProvider(s)}getCoinbaseWalletLogo(e,t=240){return(0,Ti.walletLogo)(e,t)}storeLatestVersion(){new Di.ScopedLocalStorage("CBWSDK").setItem("VERSION",qi.LIB_VERSION)}};Qe.CoinbaseWalletSDK=Tt});var Ki=h(he=>{Object.defineProperty(he,"__esModule",{value:!0});he.CoinbaseWalletSDK=void 0;var Bi=jt();he.default=Bi.CoinbaseWalletSDK;var Hi=jt();Object.defineProperty(he,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return Hi.CoinbaseWalletSDK}})});export default Ki();
